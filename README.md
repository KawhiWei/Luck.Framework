# Luck.Framework

Luck.Framework æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„ .NET å¼€å‘æ¡†æ¶ï¼Œæä¾›äº†ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„ç»„ä»¶å’Œå·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºä¼ä¸šçº§åº”ç”¨ç¨‹åºã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ä»‹ç»](#é¡¹ç›®ä»‹ç»)
- [æ”¯æŒçš„ .NET ç‰ˆæœ¬](#æ”¯æŒçš„-net-ç‰ˆæœ¬)
- [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¨¡å—è¯¦ç»†è¯´æ˜](#æ¨¡å—è¯¦ç»†è¯´æ˜)
- [ç‰ˆæœ¬æ›´æ–°è®°å½•](#ç‰ˆæœ¬æ›´æ–°è®°å½•)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸš€ é¡¹ç›®ä»‹ç»

Luck.Framework æ˜¯ä¸€ä¸ªåŸºäºæ¨¡å—åŒ–è®¾è®¡ç†å¿µçš„ .NET å¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨ï¼š

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šé€šè¿‡ Luck.AppModule å®ç°åº”ç”¨çš„æ¨¡å—åŒ–ç»„ç»‡
- **ä¾èµ–æ³¨å…¥**ï¼šæä¾›è‡ªåŠ¨ä¾èµ–æ³¨å…¥å’Œå±æ€§æ³¨å…¥æ”¯æŒ
- **æ•°æ®è®¿é—®**ï¼šæ”¯æŒå¤šç§æ•°æ®è®¿é—®æŠ€æœ¯ï¼ˆEF Coreã€Dapperã€MongoDBï¼‰
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šæ”¯æŒ RabbitMQ å’Œ Kafka åˆ†å¸ƒå¼äº‹ä»¶æ€»çº¿
- **ç¼“å­˜æ”¯æŒ**ï¼šé›†æˆ Redis ç¼“å­˜
- **æºä»£ç ç”Ÿæˆ**ï¼šæä¾›ç¼–è¯‘æ—¶ä»£ç ç”Ÿæˆèƒ½åŠ›

## ğŸ”§ æ”¯æŒçš„ .NET ç‰ˆæœ¬

| ç‰ˆæœ¬ | çŠ¶æ€ |
|------|------|
| .NET 6.0 | âœ… æ”¯æŒ |
| .NET 7.0 | âœ… æ”¯æŒ |
| .NET 8.0 | âœ… æ”¯æŒ |
| .NET 9.0 | âœ… æ”¯æŒ |
| .NET 10.0 | âœ… æ”¯æŒ (Preview) |

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—

### åŸºç¡€æ¨¡å—

| æ¨¡å— | æè¿° | NuGet |
|------|------|-------|
| **Luck.Framework** | æ ¸å¿ƒæ¡†æ¶ï¼Œæä¾›åŸºç¡€æ¥å£å’ŒæŠ½è±¡ | [![NuGet](https://img.shields.io/nuget/v/Luck.Framework.svg)](https://www.nuget.org/packages/Luck.Framework/) |
| **Luck.AppModule** | åº”ç”¨æ¨¡å—åŒ–å®ç° | [![NuGet](https://img.shields.io/nuget/v/Luck.AppModule.svg)](https://www.nuget.org/packages/Luck.AppModule/) |
| **Luck.AutoDependencyInjection** | è‡ªåŠ¨ä¾èµ–æ³¨å…¥å’Œå±æ€§æ³¨å…¥ | [![NuGet](https://img.shields.io/nuget/v/Luck.AutoDependencyInjection.svg)](https://www.nuget.org/packages/Luck.AutoDependencyInjection/) |
| **Luck.AspNetCore** | ASP.NET Core æ‰©å±•æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.AspNetCore.svg)](https://www.nuget.org/packages/Luck.AspNetCore/) |

### æ•°æ®è®¿é—®æ¨¡å—

| æ¨¡å— | æè¿° | NuGet |
|------|------|-------|
| **Luck.EntityFrameworkCore** | Entity Framework Core åŸºç¡€æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.EntityFrameworkCore.svg)](https://www.nuget.org/packages/Luck.EntityFrameworkCore/) |
| **Luck.EntityFrameworkCore.MySQL** | MySQL æ•°æ®åº“æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.EntityFrameworkCore.MySQL.svg)](https://www.nuget.org/packages/Luck.EntityFrameworkCore.MySQL/) |
| **Luck.EntityFrameworkCore.PostgreSQL** | PostgreSQL æ•°æ®åº“æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.EntityFrameworkCore.PostgreSQL.svg)](https://www.nuget.org/packages/Luck.EntityFrameworkCore.PostgreSQL/) |
| **Luck.EntityFrameworkCore.MemoryDataBase** | å†…å­˜æ•°æ®åº“æ”¯æŒï¼ˆæµ‹è¯•ç”¨ï¼‰ | [![NuGet](https://img.shields.io/nuget/v/Luck.EntityFrameworkCore.MemoryDataBase.svg)](https://www.nuget.org/packages/Luck.EntityFrameworkCore.MemoryDataBase/) |
| **Luck.Dapper** | Dapper ORM æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.Dapper.svg)](https://www.nuget.org/packages/Luck.Dapper/) |
| **Luck.Dapper.ClickHouse** | ClickHouse æ•°æ®åº“æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.Dapper.ClickHouse.svg)](https://www.nuget.org/packages/Luck.Dapper.ClickHouse/) |
| **Luck.MongoDB** | MongoDB NoSQL æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.MongoDB.svg)](https://www.nuget.org/packages/Luck.MongoDB/) |

### æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å—

| æ¨¡å— | æè¿° | NuGet |
|------|------|-------|
| **Luck.EventBus.RabbitMQ** | RabbitMQ äº‹ä»¶æ€»çº¿ | [![NuGet](https://img.shields.io/nuget/v/Luck.EventBus.RabbitMQ.svg)](https://www.nuget.org/packages/Luck.EventBus.RabbitMQ/) |
| **Luck.EventBus.Kafka** | Kafka äº‹ä»¶æ€»çº¿ | [![NuGet](https://img.shields.io/nuget/v/Luck.EventBus.Kafka.svg)](https://www.nuget.org/packages/Luck.EventBus.Kafka/) |

### ç¼“å­˜æ¨¡å—

| æ¨¡å— | æè¿° | NuGet |
|------|------|-------|
| **Luck.Redis.StackExchange** | Redis ç¼“å­˜æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.Redis.StackExchange.svg)](https://www.nuget.org/packages/Luck.Redis.StackExchange/) |

### å…¶ä»–æ¨¡å—

| æ¨¡å— | æè¿° | NuGet |
|------|------|-------|
| **Luck.DDD.Domain** | DDD é¢†åŸŸé©±åŠ¨è®¾è®¡åŸºç¡€ | [![NuGet](https://img.shields.io/nuget/v/Luck.DDD.Domain.svg)](https://www.nuget.org/packages/Luck.DDD.Domain/) |
| **Luck.Pipeline** | ç®¡é“å¤„ç†æ¨¡å¼æ”¯æŒ | [![NuGet](https://img.shields.io/nuget/v/Luck.Pipeline.svg)](https://www.nuget.org/packages/Luck.Pipeline/) |
| **Luck.SourceGenerator** | æºä»£ç ç”Ÿæˆå™¨ | [![NuGet](https://img.shields.io/nuget/v/Luck.SourceGenerator.svg)](https://www.nuget.org/packages/Luck.SourceGenerator/) |
| **Luck.TestBase** | å•å…ƒæµ‹è¯•åŸºç¡€ç±»åº“ | [![NuGet](https://img.shields.io/nuget/v/Luck.TestBase.svg)](https://www.nuget.org/packages/Luck.TestBase/) |

## ğŸ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…åŸºç¡€åŒ…

```bash
# å®‰è£…æ ¸å¿ƒæ¡†æ¶
dotnet add package Luck.Framework

# å®‰è£…åº”ç”¨æ¨¡å—
dotnet add package Luck.AppModule

# å®‰è£…è‡ªåŠ¨ä¾èµ–æ³¨å…¥
dotnet add package Luck.AutoDependencyInjection

# å®‰è£… ASP.NET Core æ”¯æŒ
dotnet add package Luck.AspNetCore
```

### 2. é…ç½® Startup

```csharp
using Luck.AppModule;
using Luck.AutoDependencyInjection;

var builder = WebApplication.CreateBuilder(args);

// æ·»åŠ  Luck æ¡†æ¶æœåŠ¡
builder.Services.AddApplication<YourAppModule>();

var app = builder.Build();

// åˆå§‹åŒ–åº”ç”¨æ¨¡å—
app.InitializeApplication();

app.Run();
```

### 3. åˆ›å»ºåº”ç”¨æ¨¡å—

```csharp
using Luck.AppModule;

public class YourAppModule : AppModule
{
    public override void ConfigureServices(ServiceConfigurationContext context)
    {
        // é…ç½®æœåŠ¡
        context.Services.AddControllers();
    }

    public override void OnApplicationInitialization(ApplicationInitializationContext context)
    {
        // åº”ç”¨åˆå§‹åŒ–
        var app = context.GetApplicationBuilder();
        app.UseRouting();
        app.UseEndpoints(endpoints =>
        {
            endpoints.MapControllers();
        });
    }
}
```

### 4. è‡ªåŠ¨ä¾èµ–æ³¨å…¥ç¤ºä¾‹

```csharp
// å®šä¹‰æœåŠ¡æ¥å£
public interface IUserService
{
    Task<User> GetByIdAsync(int id);
}

// å®ç°æœåŠ¡å¹¶æ·»åŠ è‡ªåŠ¨æ³¨å…¥ç‰¹æ€§
[Dependency(ServiceLifetime.Scoped)]
public class UserService : IUserService
{
    // å±æ€§æ³¨å…¥
    [Autowired]
    public ILogger<UserService> Logger { get; set; }

    public Task<User> GetByIdAsync(int id)
    {
        // å®ç°é€»è¾‘
    }
}
```

## ğŸ“– æ¨¡å—è¯¦ç»†è¯´æ˜

### Luck.AppModule - åº”ç”¨æ¨¡å—åŒ–

åº”ç”¨æ¨¡å—åŒ–æ˜¯ Luck.Framework çš„æ ¸å¿ƒè®¾è®¡ç†å¿µã€‚é€šè¿‡æ¨¡å—åŒ–ï¼Œå¯ä»¥å°†åº”ç”¨æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„æ¨¡å—ã€‚

```csharp
// å®šä¹‰æ¨¡å—
public class DataModule : AppModule
{
    public override void ConfigureServices(ServiceConfigurationContext context)
    {
        context.Services.AddDbContext<AppDbContext>(options =>
        {
            options.UseSqlServer(context.Configuration.GetConnectionString("Default"));
        });
    }
}

// ä¸»æ¨¡å—ä¾èµ–å…¶ä»–æ¨¡å—
[DependsOn(typeof(DataModule))]
public class MainModule : AppModule
{
    // ...
}
```

### Luck.AutoDependencyInjection - è‡ªåŠ¨ä¾èµ–æ³¨å…¥

æ”¯æŒæ¥å£æ³¨å…¥å’Œå±æ€§æ³¨å…¥ï¼Œç®€åŒ–ä¾èµ–æ³¨å†Œè¿‡ç¨‹ã€‚

**ç‰¹æ€§è¯´æ˜ï¼š**
- `[Dependency]` - æ ‡è®°æœåŠ¡è‡ªåŠ¨æ³¨å†Œåˆ° DI å®¹å™¨
- `[Autowired]` - æ ‡è®°å±æ€§è‡ªåŠ¨æ³¨å…¥
- `[Transient]` / `[Scoped]` / `[Singleton]` - æŒ‡å®šç”Ÿå‘½å‘¨æœŸ

### Luck.EntityFrameworkCore - æ•°æ®è®¿é—®

æä¾› EF Core çš„é›†æˆæ”¯æŒï¼ŒåŒ…å«å·¥ä½œå•å…ƒã€ä»“å‚¨æ¨¡å¼ç­‰ã€‚

```csharp
// é…ç½® EF Core
services.AddLuckDbContext<AppDbContext>(options =>
{
    options.UseSqlServer(configuration.GetConnectionString("Default"));
});
```

### Luck.EventBus - äº‹ä»¶æ€»çº¿

æ”¯æŒ RabbitMQ å’Œ Kafka ä¸¤ç§æ¶ˆæ¯é˜Ÿåˆ—ã€‚

```csharp
// RabbitMQ é…ç½®
services.AddRabbitMQEventBus(options =>
{
    options.HostName = "localhost";
    options.UserName = "guest";
    options.Password = "guest";
});

// å‘å¸ƒäº‹ä»¶
await eventBus.PublishAsync(new OrderCreatedEvent { OrderId = 1 });

// è®¢é˜…äº‹ä»¶
public class OrderCreatedHandler : IEventHandler<OrderCreatedEvent>
{
    public Task HandleAsync(OrderCreatedEvent eventData)
    {
        // å¤„ç†é€»è¾‘
    }
}
```

### Luck.Redis.StackExchange - ç¼“å­˜

æä¾› Redis ç¼“å­˜çš„å°è£…ã€‚

```csharp
// é…ç½® Redis
services.AddLuckRedis(options =>
{
    options.ConnectionString = "localhost:6379";
});

// ä½¿ç”¨ç¼“å­˜
public class MyService
{
    private readonly IRedisCache _cache;

    public MyService(IRedisCache cache)
    {
        _cache = cache;
    }

    public async Task<string> GetDataAsync()
    {
        return await _cache.GetOrCreateAsync("key", async () =>
        {
            return await FetchDataFromDbAsync();
        }, TimeSpan.FromMinutes(5));
    }
}
```

## ğŸ“ ç‰ˆæœ¬æ›´æ–°è®°å½•

æ‰€æœ‰ç‰ˆæœ¬æ›´æ–°è®°å½•è¯·æŸ¥çœ‹ `change/` ç›®å½•ï¼š

### æœ€æ–°ç‰ˆæœ¬ (2.0.8)

- âœ… æ·»åŠ å¯¹ .NET 9.0 å’Œ .NET 10.0 çš„æ”¯æŒ
- âœ… å‡çº§æ‰€æœ‰ä¾èµ–åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬
- âœ… StackExchange.Redis: 2.8.0 â†’ 2.11.0
- âœ… Dapper: 2.1.35 â†’ 2.1.66
- âœ… Confluent.Kafka: 2.5.0 â†’ 2.13.0

### å†å²ç‰ˆæœ¬

| ç‰ˆæœ¬ | æ–‡ä»¶ |
|------|------|
| 2.0.8 | [change/2.0.8.md](change/2.0.8.md) |
| 2.0.6 | [change/2.0.6.md](change/2.0.6.md) |
| 2.0.5 | [change/2.0.5.md](change/2.0.5.md) |
| 2.0.4 | [change/2.0.4.md](change/2.0.4.md) |
| 2.0.3 | [change/2.0.3.md](change/2.0.3.md) |
| 2.0.2 | [change/2.0.2.md](change/2.0.2.md) |
| 2.0.1 | [change/2.0.1.md](change/2.0.1.md) |
| 2.0.0 | [change/2.0.0.md](change/2.0.0.md) |
| 1.0.7 | [change/1.0.7.md](change/1.0.7.md) |
| 1.0.6 | [change/1.0.6.md](change/1.0.6.md) |
| 1.0.5 | [change/1.0.5.md](change/1.0.5.md) |

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿› Luck.Frameworkï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [LGPL-3.0-only](LICENSE) è®¸å¯è¯å¼€æºã€‚

---

**ç»´æŠ¤è€…**: [KawhiWei](https://github.com/KawhiWei)  
**é¡¹ç›®åœ°å€**: [https://github.com/KawhiWei/Luck.Framework](https://github.com/KawhiWei/Luck.Framework)
